"use strict";var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(function(){return t}):"object"===("undefined"==typeof exports?"undefined":v(exports))?module.exports=t:e.Katelog=t}(window,function(e){function f(e,t){return!!e.className&&e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function u(e,t){if(f(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),o=1;o<arguments.length;o++){var a=arguments[o];if(null!=a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])}return n},writable:!0,configurable:!0});var d=Object.assign({},{linkClass:"k-catelog-link",linkActiveClass:"k-catelog-link-active",supplyTop:0,selector:["h1","h2","h3","h4","h5","h6"],active:null},e),t=document.getElementById(d.contentEl),p=document.getElementById(d.catelogEl);function s(e,t){for(var n=t.parent;n&&g(e.tagName)>=g(n.tagName);)n=n.parent;return n||{id:-1}}function g(e){var t=0;if(e)switch(e.toLowerCase()){case"h1":t=6;break;case"h2":t=5;break;case"h3":t=4;break;case"h4":t=3;break;case"h5":t=2;break;case"h6":t=1}return t}function n(e,t,n){e&&(e.attachEvent?(e["e"+t+n]=n,e[t+n]=function(){e["e"+t+n](window.event)},e.attachEvent("on"+t,e[t+n])):e.addEventListener(t,n,!1))}var a=t.querySelectorAll(d.selector.join()),o=function(e){for(var t,n=void 0,o=[],a={},i={id:-1},l=null,r=void 0,c=0;c<e.length;c++)r="heading-"+c,a={name:e[c].innerText||e[c].textContent,tagName:n=e[c].tagName,id:e[c].id=r,level:(t=n,t?t.slice(1):0),parent:i},l&&(g(a.tagName)<g(l.tagName)?a.parent=l:a.parent=s(a,l)),l=a,o.push(a);return o}(a),i=!1;p.innerHTML=function e(t,n){var o,a,i=void 0,l=!1;if(t){i="<ul>";for(var r=0;r<t.length;r++)o=t[r].parent,a=n,o&&a&&"object"===(void 0===o?"undefined":v(o))&&"object"===(void 0===a?"undefined":v(a))&&o.id===a.id&&(l=!0,i+='<li><div class="'+d.linkClass+" k-catelog-level-"+t[r].level+'" data-target="'+t[r].id+'">'+t[r].name+"</div>",i+=e(t,t[r]),i+="</li>");i+="</ul>"}return l?i:""}(o,{id:-1});var l="\n        .k-catelog-list { overflow: hidden !important; }\n        .k-catelog-list > ul { position: relative; }    \n    ",r=document.createElement("style");function c(e){var t,n=p.querySelectorAll("[data-target]");t=n,n=Array.prototype.slice.call(t);for(var o,a,i,l,r=null,c=void 0,s=0;s<n.length;s++)c=n[s],l="target",((i=c).dataset?i.dataset[l]:i.getAttribute("data-"+l))===e?(o=c,a=d.linkActiveClass,f(o,a)||(o.className+=" "+a),r=c,p.children[0].offsetHeight>p.offsetHeight&&(c.offsetTop>p.offsetHeight/2?p.children[0].offsetHeight-c.offsetTop-c.offsetHeight<p.offsetHeight/2?p.children[0].style.marginTop=-p.children[0].offsetHeight+p.offsetHeight+"px":p.children[0].style.marginTop=p.offsetHeight/2-c.offsetTop+"px":p.children[0].style.marginTop="0px")):u(c,d.linkActiveClass);"function"==typeof d.active&&d.active.call(this,r)}function h(e){for(var t=e.offsetTop;e=e.offsetParent;)t+=e.offsetTop;return t}r.type="text/css",r.styleSheet?r.styleSheet.cssText=l:r.innerHTML=l,document.getElementsByTagName("head")[0].appendChild(r),n(p,"click",function(e){var t=(e.target||e.srcElement).getAttribute("data-target");if(t){var n=document.getElementById(t);i=!0,window.scrollTo(0,n.offsetTop-d.supplyTop),c(t)}}),n(window,"scroll",function(e){if(!i){for(var t=(document.documentElement.scrollTop||document.body.scrollTop)+d.supplyTop,n=null,o=a.length-1;0<=o;o--)if(h(a[o])<=t){n=a[o];break}c(n?n.id:null)}i=!1})});
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(function(){return t}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t:e.Katelog=t}(window,function(e){var f=Object.assign({},{linkClass:"k-catelog-link",linkActiveClass:"k-catelog-link-active",supplyTop:0},e),i=(document.getElementById(f.contentEl),document.getElementById(f.catelogEl));function r(e,t){for(var n=t.parent;n&&s(e.tagName)>=s(n.tagName);)n=n.parent;return n||{id:-1}}function s(e){var t=0;if(e)switch(e.toLowerCase()){case"h1":t=6;break;case"h2":t=5;break;case"h3":t=4;break;case"h4":t=3;break;case"h5":t=2;break;case"h6":t=1}return t}function t(e,t,n){e&&(e.attachEvent?(e["e"+t+n]=n,e[t+n]=function(){e["e"+t+n](window.event)},e.attachEvent("on"+t,e[t+n])):e.addEventListener(t,n,!1))}var a=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),n=function(e){for(var t=[],n={},o={id:-1},i=null,a=void 0,l=0;l<e.length;l++)a="heading-"+l,n={name:e[l].innerText||e[l].textContent,tagName:e[l].tagName,id:e[l].id=a,parent:o},i&&(s(n.tagName)<s(i.tagName)?n.parent=i:n.parent=r(n,i)),i=n,t.push(n);return t}(a),l=!1;i.innerHTML=function e(t,n){var o,i,a=void 0,l=!1;if(t){a="<ul>";for(var r=0;r<t.length;r++)o=t[r].parent,i=n,o&&i&&"object"===(void 0===o?"undefined":_typeof(o))&&"object"===(void 0===i?"undefined":_typeof(i))&&o.id===i.id&&(l=!0,a+='<li><div class="'+f.linkClass+'" data-target="'+t[r].id+'">'+t[r].name+"</div>",a+=e(t,t[r]),a+="</li>");a+="</ul>"}return l?a:""}(n,{id:-1});var o="\n        .k-catelog-list { overflow: hidden !important; }\n        .k-catelog-list > ul { position: relative; }    \n    ",c=document.createElement("style");function d(t){i.querySelectorAll("[data-target]").forEach(function(e){e.dataset.target===t?(e.classList.add(f.linkActiveClass),e.offsetTop>i.offsetHeight/2?i.children[0].offsetHeight-e.offsetTop-e.offsetHeight<i.offsetHeight/2?(console.log(i.children[0].offsetHeight-e.offsetTop-e.offsetHeight),i.children[0].style.marginTop=-i.children[0].offsetHeight+i.offsetHeight+"px"):i.children[0].style.marginTop=i.offsetHeight/2-e.offsetTop+"px":i.children[0].style.marginTop="0px"):e.classList.remove(f.linkActiveClass)})}c.type="text/css",c.styleSheet?c.styleSheet.cssText=o:c.innerHTML=o,document.getElementsByTagName("head")[0].appendChild(c),t(i,"click",function(e){var t=(e.target||e.srcElement).getAttribute("data-target");if(t){var n=document.getElementById(t);l=!0,window.scrollTo(0,n.offsetTop-f.supplyTop),d(t)}}),t(window,"scroll",function(e){if(!l){for(var t=(document.documentElement.scrollTop||document.body.scrollTop)+i.offsetTop+f.supplyTop,n=null,o=a.length-1;0<=o;o--)if(a[o].offsetTop<=t){n=a[o];break}n&&d(n.id)}l=!1})});